/* ===============================
   BiHunters PWA — style.css
   Dark Survival Horror Dashboard
   =============================== */

/* --- Variables --- */
:root {
  --bg-deep:    #060709;
  --bg-dark:    #0a0c10;
  --bg-surface: rgba(10, 13, 18, 0.80);
  --bg-panel:   rgba(7, 10, 14, 0.85);

  --gold:       #c8a84b;
  --gold-dim:   rgba(200, 168, 75, 0.18);
  --gold-glow:  rgba(200, 168, 75, 0.35);
  --red:        #c03838;
  --red-dim:    rgba(192, 56, 56, 0.18);
  --green:      #4caf6e;
  --green-dim:  rgba(76, 175, 110, 0.18);

  --text-1:   #eaeaea;
  --text-2:   #8a9aaa;
  --text-3:   #4a5560;
  --text-gold: #c8a84b;
  --text-red:  #d94545;

  --border:    rgba(90, 110, 130, 0.16);
  --border-hi: rgba(200, 168, 75, 0.28);

  --font-title: 'Bebas Neue', sans-serif;
  --font-ui:    'Rajdhani', sans-serif;
  --font-mono:  'Share Tech Mono', monospace;
  --ease: 0.22s ease;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html, body {
  width: 100%; height: 100%;
  overflow: hidden;
  background: var(--bg-deep);
  color: var(--text-1);
  font-family: var(--font-ui);
  -webkit-font-smoothing: antialiased;
}

/* ================================
   BACKGROUNDS
   ================================ */
.bg-sky {
  position: fixed; inset: 0; z-index: 0;
  background: radial-gradient(ellipse 130% 65% at 50% 0%,
    #1a2535 0%, #0d1520 45%, #060709 100%);
}

.bg-fog { position: fixed; bottom: 0; left: -10%; width: 120%; z-index: 1; pointer-events: none; border-radius: 50%; }
.fog-1  { height: 38%; background: radial-gradient(ellipse at 50% 100%, rgba(80,100,130,.10) 0%, transparent 70%); animation: fogDrift 20s ease-in-out infinite alternate; }
.fog-2  { height: 26%; bottom: 8%; background: radial-gradient(ellipse at 40% 100%, rgba(60,80,110,.07) 0%, transparent 65%); animation: fogDrift 28s ease-in-out infinite alternate-reverse; }

@keyframes fogDrift {
  from { transform: translateX(-3%) scaleX(1); }
  to   { transform: translateX(3%) scaleX(1.04); }
}

.bg-treeline {
  position: fixed; bottom: 0; left: 0; right: 0; height: 26%; z-index: 2;
  background: linear-gradient(to top, #060709 0%, #060709 32%, transparent 100%);
  clip-path: polygon(
    0% 100%, 0% 58%, 3% 46%, 5% 56%, 7% 32%, 9% 46%, 11% 22%,
    13% 42%, 15% 26%, 17% 44%, 19% 34%, 22% 50%, 25% 22%,
    28% 40%, 30% 28%, 32% 46%, 35% 20%, 37% 38%, 40% 24%,
    43% 42%, 46% 16%, 49% 36%, 52% 26%, 54% 44%, 57% 22%,
    60% 40%, 63% 26%, 66% 46%, 69% 20%, 72% 40%, 75% 28%,
    78% 48%, 81% 18%, 84% 40%, 87% 24%, 90% 44%, 93% 28%,
    96% 48%, 99% 36%, 100% 52%, 100% 100%
  );
}

.bg-vignette {
  position: fixed; inset: 0; z-index: 3; pointer-events: none;
  background: radial-gradient(ellipse 100% 100% at 50% 50%,
    transparent 35%, rgba(0,0,0,.75) 100%);
}

.stars { position: fixed; inset: 0; z-index: 1; pointer-events: none; }
.star  { position: absolute; background: #fff; border-radius: 50%; opacity: 0; animation: twinkle 5s ease-in-out infinite; }
@keyframes twinkle { 0%,100%{opacity:0} 50%{opacity:.65} }

/* ================================
   SCREENS
   ================================ */
.screen {
  position: fixed; inset: 0; z-index: 10;
  display: flex; flex-direction: column;
  opacity: 0; pointer-events: none;
  transition: opacity .35s ease;
}
.screen.active { opacity: 1; pointer-events: all; }

/* ================================
   TOPBAR
   ================================ */
.topbar {
  display: flex; align-items: center; justify-content: space-between;
  padding: .9rem 1.8rem;
  border-bottom: 1px solid var(--border);
  background: rgba(5, 6, 9, 0.7);
  backdrop-filter: blur(14px);
  z-index: 20; flex-shrink: 0;
  gap: 1rem;
}
.topbar-left, .topbar-right { display: flex; align-items: center; gap: .9rem; }

.logo {
  font-family: var(--font-title);
  font-size: 1.55rem;
  letter-spacing: .06em;
  color: var(--text-1);
  line-height: 1;
}
.logo span { color: var(--gold); }

.topbar-divider { color: var(--text-3); font-size: .8rem; }

.topbar-label {
  font-family: var(--font-mono);
  font-size: .6rem;
  letter-spacing: .22em;
  color: var(--text-3);
}

.live-dot {
  width: 7px; height: 7px; border-radius: 50%;
  background: var(--green);
  box-shadow: 0 0 6px var(--green);
  animation: pulse 2s ease-in-out infinite;
}
@keyframes pulse { 0%,100%{opacity:1} 50%{opacity:.4} }

.live-label {
  font-family: var(--font-mono);
  font-size: .6rem;
  letter-spacing: .12em;
  color: var(--text-2);
}

.icon-btn {
  width: 32px; height: 32px;
  display: flex; align-items: center; justify-content: center;
  background: rgba(255,255,255,.04);
  border: 1px solid var(--border);
  color: var(--text-2);
  cursor: pointer;
  transition: color var(--ease), border-color var(--ease);
}
.icon-btn:hover { color: var(--gold); border-color: var(--border-hi); }
.icon-btn.spinning svg { animation: spin .7s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }

.nav-btn {
  font-family: var(--font-ui);
  font-size: .85rem;
  font-weight: 600;
  letter-spacing: .18em;
  text-transform: uppercase;
  color: var(--text-1);
  background: transparent;
  border: 1px solid var(--border);
  cursor: pointer;
  padding: .5rem 1.1rem;
  position: relative; overflow: hidden;
  transition: color var(--ease), border-color var(--ease);
}
.nav-btn::before {
  content: ''; position: absolute; inset: 0;
  background: linear-gradient(90deg, var(--gold), transparent);
  transform: translateX(-100%); transition: transform .28s ease; opacity: .1;
}
.nav-btn:hover { color: var(--gold); border-color: var(--border-hi); }
.nav-btn:hover::before { transform: translateX(0); }
.nav-btn.small { font-size: .65rem; padding: .35rem .8rem; }
.nav-btn.primary-action {
  color: var(--bg-deep); background: var(--gold);
  border-color: var(--gold); font-weight: 700; letter-spacing: .22em;
}
.nav-btn.primary-action:hover { background: #d4b458; color: var(--bg-deep); }
.nav-btn.primary-action::before { display: none; }
.nav-btn.full-width { width: 100%; text-align: center; }
.nav-btn:disabled { cursor: not-allowed; }

.back-btn {
  font-family: var(--font-mono); font-size: .65rem; letter-spacing: .15em;
  color: var(--text-2); background: none; border: none; cursor: pointer;
  transition: color var(--ease);
}
.back-btn:hover { color: var(--gold); }

/* ================================
   FILTER BAR
   ================================ */
.filter-bar {
  display: flex; align-items: center; gap: 1rem;
  padding: .75rem 1.8rem;
  border-bottom: 1px solid var(--border);
  background: rgba(5,6,9,.5);
  backdrop-filter: blur(8px);
  flex-shrink: 0; flex-wrap: wrap;
}

.search-wrap {
  position: relative; display: flex; align-items: center;
  flex: 1; min-width: 180px; max-width: 300px;
}
.search-icon {
  position: absolute; left: .7rem; color: var(--text-3); pointer-events: none;
}
.search-input {
  width: 100%; padding: .48rem .7rem .48rem 2rem;
  background: rgba(255,255,255,.03);
  border: 1px solid var(--border);
  color: var(--text-1);
  font-family: var(--font-mono); font-size: .62rem; letter-spacing: .1em;
  outline: none; transition: border-color var(--ease);
}
.search-input::placeholder { color: var(--text-3); }
.search-input:focus { border-color: rgba(200,168,75,.3); }

.filter-pills { display: flex; gap: .4rem; }
.pill {
  font-family: var(--font-mono); font-size: .58rem; letter-spacing: .14em;
  padding: .32rem .75rem;
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text-3); cursor: pointer;
  transition: color var(--ease), border-color var(--ease), background var(--ease);
}
.pill:hover { color: var(--text-1); border-color: rgba(100,120,140,.35); }
.pill.active { color: var(--gold); border-color: var(--gold-glow); background: var(--gold-dim); }

.party-count {
  font-family: var(--font-mono); font-size: .6rem;
  letter-spacing: .14em; color: var(--text-3);
  margin-left: auto;
}

/* ================================
   PARTY GRID
   ================================ */
.party-grid-wrapper {
  flex: 1; overflow-y: auto; padding: 1.4rem 1.8rem 6rem;
}

.party-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 1rem;
}

/* ---- Card ---- */
.party-card {
  position: relative; overflow: hidden;
  background: var(--bg-panel);
  border: 1px solid var(--border);
  backdrop-filter: blur(10px);
  padding: 1.1rem 1.15rem 1rem;
  cursor: pointer;
  display: flex; flex-direction: column; gap: .55rem;
  opacity: 0;
  animation: cardIn .4s ease forwards;
  transition: border-color var(--ease), transform var(--ease);
}
.party-card:hover {
  border-color: rgba(100,130,160,.38);
  transform: translateY(-2px);
}
.party-card:hover .card-shine { opacity: 1; }

/* Status border accent */
.party-card::after {
  content: ''; position: absolute;
  left: 0; top: 0; bottom: 0; width: 2px;
}
.status-waiting::after { background: var(--green); box-shadow: 0 0 8px var(--green); }
.status-in-game::after { background: var(--gold); box-shadow: 0 0 8px var(--gold); }
.status-full::after    { background: var(--red);   box-shadow: 0 0 8px var(--red); }

/* Hover shine */
.card-shine {
  position: absolute; inset: 0; opacity: 0;
  background: linear-gradient(130deg, rgba(255,255,255,.03) 0%, transparent 60%);
  pointer-events: none; transition: opacity .25s;
}

@keyframes cardIn {
  from { opacity: 0; transform: translateY(10px); }
  to   { opacity: 1; transform: translateY(0); }
}

.card-top {
  display: flex; align-items: center; gap: .5rem;
}
.card-status-indicator { display: flex; align-items: center; gap: .35rem; flex: 1; }
.card-dot {
  width: 6px; height: 6px; border-radius: 50%; flex-shrink: 0;
}
.status-waiting .card-dot { background: var(--green); box-shadow: 0 0 5px var(--green); }
.status-in-game .card-dot { background: var(--gold);  box-shadow: 0 0 5px var(--gold); }
.status-full    .card-dot { background: var(--red);   box-shadow: 0 0 5px var(--red); }

.card-status-lbl {
  font-family: var(--font-mono); font-size: .55rem;
  letter-spacing: .14em; color: var(--text-3);
}
.status-waiting .card-status-lbl { color: var(--green); }
.status-in-game .card-status-lbl { color: var(--gold); }
.status-full    .card-status-lbl { color: var(--red); }

.card-ping {
  font-family: var(--font-mono); font-size: .52rem;
  letter-spacing: .08em; margin-left: auto;
}
.ping-good { color: var(--green); }
.ping-ok   { color: var(--gold); }
.ping-bad  { color: var(--red); }

.card-host {
  font-family: var(--font-title);
  font-size: 1.3rem;
  letter-spacing: .06em;
  color: var(--text-1);
  line-height: 1;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}

.card-map {
  display: flex; align-items: center; gap: .4rem;
  font-family: var(--font-mono); font-size: .57rem;
  letter-spacing: .1em; color: var(--text-3);
}

.card-footer {
  display: flex; align-items: center; justify-content: space-between;
  margin-top: .2rem;
}

.pips-row { display: flex; gap: 4px; }
.pip {
  width: 10px; height: 10px;
  border: 1px solid rgba(100,120,140,.3);
  background: transparent;
}
.pip.filled          { background: rgba(100,140,180,.35); border-color: rgba(100,140,180,.5); }
.pip.filled.pip-hunter { background: rgba(192,56,56,.45);  border-color: rgba(192,56,56,.6); }

.card-count {
  font-family: var(--font-title); font-size: 1.35rem;
  color: var(--text-1); line-height: 1;
}
.count-max { font-size: .7rem; color: var(--text-3); }

/* ---- Empty State ---- */
.empty-state {
  flex: 1; display: flex; flex-direction: column;
  align-items: center; justify-content: center; gap: .6rem;
  color: var(--text-3);
}
.empty-icon { font-size: 2rem; opacity: .3; }
.empty-state p { font-family: var(--font-mono); font-size: .75rem; letter-spacing: .2em; }
.empty-state small { font-family: var(--font-mono); font-size: .6rem; letter-spacing: .12em; opacity: .6; }

/* ================================
   MODAL
   ================================ */
.modal-overlay {
  position: fixed; inset: 0; z-index: 50;
  background: rgba(4,5,8,.75);
  backdrop-filter: blur(6px);
  display: flex; align-items: center; justify-content: center;
  opacity: 0; pointer-events: none;
  transition: opacity .28s ease;
}
.modal-overlay.active { opacity: 1; pointer-events: all; }

.modal-box {
  background: rgba(8, 11, 17, 0.97);
  border: 1px solid var(--border-hi);
  width: 90%; max-width: 440px;
  padding: 1.8rem;
  position: relative;
  animation: modalSlide .28s ease;
}
@keyframes modalSlide {
  from { transform: translateY(16px); opacity: 0; }
  to   { transform: translateY(0);    opacity: 1; }
}

.modal-close {
  position: absolute; top: 1rem; right: 1rem;
  background: none; border: none;
  color: var(--text-3); cursor: pointer; font-size: .85rem;
  transition: color var(--ease);
}
.modal-close:hover { color: var(--text-1); }

.modal-header {
  display: flex; align-items: flex-start; gap: 1rem;
  margin-bottom: 1.4rem;
}
.modal-map-badge {
  width: 46px; height: 46px; flex-shrink: 0;
  display: flex; align-items: center; justify-content: center;
  background: var(--gold-dim);
  border: 1px solid var(--gold-glow);
  font-family: var(--font-title); font-size: 1.2rem;
  color: var(--gold);
}
.modal-header-text { flex: 1; }
.modal-title {
  font-family: var(--font-title); font-size: 1.1rem;
  letter-spacing: .08em; color: var(--text-1);
}
.modal-host {
  font-family: var(--font-mono); font-size: .6rem;
  letter-spacing: .14em; color: var(--text-3); margin-top: .2rem;
}

.modal-status-badge {
  font-family: var(--font-mono); font-size: .55rem;
  letter-spacing: .14em; padding: .25rem .6rem;
  border: 1px solid; white-space: nowrap;
}
.badge-waiting { color: var(--green); border-color: var(--green); background: var(--green-dim); }
.badge-in-game { color: var(--gold);  border-color: var(--gold);  background: var(--gold-dim); }
.badge-full    { color: var(--red);   border-color: var(--red);   background: var(--red-dim); }

.modal-slots {
  display: flex; flex-direction: column; gap: .35rem;
  margin-bottom: 1.2rem;
}
.modal-slot {
  display: flex; align-items: center; justify-content: space-between;
  padding: .55rem .75rem;
  border: 1px solid var(--border);
  font-family: var(--font-mono); font-size: .62rem; letter-spacing: .1em;
}
.modal-slot.occupied { background: rgba(255,255,255,.02); }
.modal-slot.open { opacity: .45; }
.slot-role { color: var(--text-3); }
.slot-player { color: var(--text-1); }
.modal-slot.occupied:first-child .slot-role { color: var(--red); }

.modal-meta {
  display: flex; gap: 1.5rem;
  font-family: var(--font-mono); font-size: .6rem;
  letter-spacing: .1em; color: var(--text-3);
  padding-bottom: 1.2rem;
  border-bottom: 1px solid var(--border);
  margin-bottom: 1.2rem;
}
.modal-meta b { color: var(--text-2); }

/* ================================
   CHARACTERS
   ================================ */
.characters-layout {
  flex: 1; display: flex; flex-direction: column;
  align-items: flex-start; padding: 2rem 3rem; gap: 1rem; overflow-y: auto;
}
.char-label {
  font-family: var(--font-mono); font-size: .62rem;
  letter-spacing: .24em; color: var(--text-3);
}
.char-list { list-style: none; display: flex; flex-direction: column; gap: .4rem; width: 100%; max-width: 480px; }
.char-item {
  display: flex; align-items: center; gap: 1.1rem;
  padding: .95rem 1.3rem;
  border: 1px solid var(--border); cursor: pointer; position: relative; overflow: hidden;
  font-family: var(--font-ui); font-size: 1.05rem; font-weight: 600; letter-spacing: .15em;
  color: var(--text-2);
  transition: border-color var(--ease), color var(--ease), background var(--ease);
}
.char-item::before {
  content: ''; position: absolute; left: 0; top: 0; bottom: 0;
  width: 2px; background: transparent; transition: background var(--ease);
}
.char-item:hover { border-color: rgba(100,120,150,.38); color: var(--text-1); background: rgba(255,255,255,.02); }
.char-item:hover::before { background: var(--text-2); }
.char-item.selected { border-color: var(--border-hi); color: var(--gold); background: var(--gold-dim); }
.char-item.selected::before { background: var(--gold); }
.hunter-char { color: #b04040; }
.hunter-char:hover, .hunter-char.selected { color: var(--red); border-color: rgba(192,56,56,.45); background: var(--red-dim); }
.hunter-char:hover::before, .hunter-char.selected::before { background: var(--red); }
.char-icon {
  width: 34px; height: 34px; display: flex; align-items: center; justify-content: center;
  border: 1px solid currentColor; opacity: .6; flex-shrink: 0; font-size: .95rem;
}
.char-desc { margin-left: auto; font-family: var(--font-mono); font-size: .57rem; letter-spacing: .08em; color: var(--text-3); font-weight: 400; }
.char-confirm { display: flex; align-items: center; gap: 1.5rem; padding-top: .5rem; border-top: 1px solid var(--border); width: 100%; max-width: 480px; }
#selected-char-name { font-family: var(--font-mono); font-size: .65rem; letter-spacing: .15em; color: var(--gold); }

/* ================================
   SETTINGS
   ================================ */
.settings-layout {
  flex: 1; display: grid; grid-template-columns: repeat(auto-fit, minmax(280px,1fr));
  gap: 1.5rem; padding: 2rem; align-content: start; overflow-y: auto;
}
.settings-group { display: flex; flex-direction: column; gap: 0; }
.panel { background: var(--bg-panel); border: 1px solid var(--border); backdrop-filter: blur(12px); padding: 1.4rem; }
.panel-title {
  font-family: var(--font-mono); font-size: .62rem; letter-spacing: .22em;
  color: var(--gold); margin-bottom: 1.1rem; padding-bottom: .55rem; border-bottom: 1px solid var(--border);
}
.setting-row {
  display: flex; align-items: center; gap: 1rem; padding: .75rem 0;
  border-bottom: 1px solid var(--border); cursor: pointer;
  font-family: var(--font-mono); font-size: .67rem; letter-spacing: .1em; color: var(--text-2);
}
.setting-row:last-child { border-bottom: none; }
.setting-row span:first-child { flex: 1; }
.hud-slider {
  width: 96px; -webkit-appearance: none; appearance: none;
  height: 2px; background: rgba(100,120,140,.28); outline: none; cursor: pointer;
}
.hud-slider::-webkit-slider-thumb { -webkit-appearance: none; width: 11px; height: 11px; background: var(--gold); cursor: pointer; border: none; }
.hud-slider::-moz-range-thumb { width: 11px; height: 11px; background: var(--gold); cursor: pointer; border: none; border-radius: 0; }
.slider-val { min-width: 2ch; text-align: right; color: var(--gold); font-size: .62rem; }
.hud-select {
  background: rgba(10,13,18,.8); border: 1px solid var(--border);
  color: var(--text-1); font-family: var(--font-mono); font-size: .62rem;
  letter-spacing: .08em; padding: .28rem .55rem; cursor: pointer; outline: none;
  appearance: none; -webkit-appearance: none;
}
.hud-toggle {
  width: 17px; height: 17px; border: 1px solid var(--border);
  background: transparent; appearance: none; -webkit-appearance: none;
  cursor: pointer; position: relative; flex-shrink: 0;
}
.hud-toggle:checked { background: var(--gold); border-color: var(--gold); }
.hud-toggle:checked::after {
  content: '✓'; position: absolute; inset: 0;
  display: flex; align-items: center; justify-content: center;
  font-size: .6rem; color: var(--bg-deep); font-weight: 900;
}

/* ================================
   SCROLLBAR
   ================================ */
::-webkit-scrollbar { width: 3px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(100,120,140,.25); }

/* ================================
   RESPONSIVE
   ================================ */
@media (max-width: 640px) {
  .party-grid { grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); }
  .topbar { padding: .75rem 1rem; }
  .filter-bar { padding: .65rem 1rem; }
  .party-grid-wrapper { padding: 1rem 1rem 5rem; }
  .characters-layout, .settings-layout { padding: 1.2rem; }
  .topbar-right .nav-btn { display: none; }
}